<!-- breadcrumbs -->
	<div class="breadcrumbs">
		<div class="container">
			<ol class="breadcrumb breadcrumb1 animated wow slideInLeft" data-wow-delay=".5s">
				<li><a href="/"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>Home</a></li>
				<li class="active">Reset Password</li>
			</ol>
		</div>
	</div>
<!-- //breadcrumbs -->
<!-- login -->
	<div class="login">
		<div class="container" id="container">
			<h2>Reset Password</h2>
			<div id="formContainer" class="login-form-grids animated wow slideInUp" data-wow-delay=".5s">
				<form action="/forgotpassword" id="resetForm" method="post" >
				<input type="hidden" name="_csrf" value="{{ csrfToken }}">
					<input type="email" id="email" name="email" placeholder="Email Address" required/>
					<input type="submit" value="Reset Password">
				</form>
			</div>
			<h4>Want to signin?</h4>
			<p><a href="/user/signin">Sign In Here</a> (Or) go back to <a href="/">Home<span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></a></p>
		</div>
	</div>
<!-- //login -->

<script type="text/javascript" >
$( document ).ready(function(){
	$.ajaxSetup({
		headers: {"X-CSRF-Token": "{{csrfToken}}" } 
	);
	// SUBMIT FORM
    $("#resetForm").submit(function(event) {
		event.preventDefault();
		console.log('PERFORMING AJAX CONTROLS');
		ajaxPost();
		//ajaxGet();
	});
    
    
    function ajaxPost(){
    	// PREPARE FORM DATA
    	var formData = {
    		email :  $('#email').val()
    	}
    	
    	// DO POST
    	$.ajax({
			type : "POST",
			contentType : "application/json",
			url : window.location + "/forgotpassword",
			data : JSON.stringify(formData),
			dataType : 'json',
			success : function(data) {
				$("#container").html("<p>" + 
					"Post Successfully! <br>" + JSON.stringify(data)+ "</p>"); 
			},
			error : function(e) {
				alert("Error!")
				console.log("ERROR: ", e);
			}
		});
    	// Reset FormData after Posting
    	resetData();
    }

	function ajaxGet(){
		$.ajax({
			type : "GET",
			url : window.location + "/forgotpassword",
			success: function(result){
				//$('#getResultDiv ul').empty();
				var custList = "";
				$.each(result, function(i,data){
					$('#container').append(data.email + "Message sent to your mail" + "<br>")
				});
				console.log("Success: ", result);
			},
			error : function(e) {
				$("#container").html("<strong>Error</strong>");
				console.log("ERROR: ", e);
			}
		});	
	}
    
    function resetData(){
    	$("#email").val("");
    }
});

</script>	
